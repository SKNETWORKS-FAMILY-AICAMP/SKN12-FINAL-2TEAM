@startuml
actor User
participant Browser
participant AuthProvider as AP
participant RouteGuard as RG
participant ApiClient as API
participant AuthService as AS

User -> Browser: Access /dashboard
Browser -> RG: requireAuth()
note right of RG: <<planned>> RouteGuard implementation required

alt no token
  RG -> Browser: redirect(/login)
  User -> Browser: submit credentials
  Browser -> AS: POST /auth/login
  AS --> Browser: {token, refreshToken, exp}
  Browser -> AP: setToken(token, refreshToken, exp)
else token exists
  RG -> Browser: render(dashboard)
  Browser -> API: GET /portfolio (Authorization: Bearer)
  API --> Browser: Portfolio JSON
end
@enduml
