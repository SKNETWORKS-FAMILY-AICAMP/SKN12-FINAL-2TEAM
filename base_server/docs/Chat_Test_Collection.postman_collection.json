{
  "info": {
    "name": "Base Server Chat Test Collection",
    "description": "AI ì±—ë´‡ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ ì „ìš© ì»¬ë ‰ì…˜ - íšŒì›ê°€ì…ë¶€í„° ì±„íŒ…ê¹Œì§€ ì™„ì „í•œ ì‹œë‚˜ë¦¬ì˜¤",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": "1.0.0"
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8000",
      "type": "string",
      "description": "Base server URL"
    },
    {
      "key": "access_token",
      "value": "",
      "type": "string",
      "description": "JWT access token from login"
    },
    {
      "key": "room_id",
      "value": "",
      "type": "string", 
      "description": "Chat room ID from room creation"
    },
    {
      "key": "test_user_id",
      "value": "chattest_{{$randomInt}}",
      "type": "string",
      "description": "Random test user ID"
    },
    {
      "key": "test_email",
      "value": "chattest_{{$randomInt}}@example.com",
      "type": "string",
      "description": "Random test email"
    },
    {
      "key": "sequence",
      "value": "1",
      "type": "string",
      "description": "Request sequence number"
    }
  ],
  "item": [
    {
      "name": "ğŸš€ Step 1: íšŒì›ê°€ì…",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('íšŒì›ê°€ì… ì„±ê³µ í™•ì¸', function () {",
              "    const response = pm.response.json();",
              "    pm.expect(response.errorCode).to.eql(0);",
              "    console.log('âœ… íšŒì›ê°€ì… ì™„ë£Œ:', pm.collectionVariables.get('test_user_id'));",
              "});",
              "",
              "// ë‹¤ìŒ ìš”ì²­ì„ ìœ„í•´ sequence ì¦ê°€",
              "let currentSeq = parseInt(pm.collectionVariables.get('sequence'));",
              "pm.collectionVariables.set('sequence', (currentSeq + 1).toString());"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Accept",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"accessToken\": \"\",\n  \"sequence\": {{sequence}},\n  \"platform_type\": \"native\",\n  \"account_id\": \"{{test_user_id}}\",\n  \"password\": \"Test1234!\",\n  \"email\": \"{{test_email}}\",\n  \"nickname\": \"í…ŒìŠ¤íŠ¸ìœ ì €_{{$randomInt}}\"\n}"
        },
        "url": {
          "raw": "{{base_url}}/api/account/signup",
          "host": ["{{base_url}}"],
          "path": ["api", "account", "signup"]
        },
        "description": "ìƒˆ ì‚¬ìš©ì ê³„ì •ì„ ìƒì„±í•©ë‹ˆë‹¤."
      }
    },
    {
      "name": "ğŸ”‘ Step 2: ë¡œê·¸ì¸",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('ë¡œê·¸ì¸ ì„±ê³µ í™•ì¸', function () {",
              "    const response = pm.response.json();",
              "    pm.expect(response.errorCode).to.eql(0);",
              "    pm.expect(response.accessToken).to.exist;",
              "    ",
              "    // accessToken ì €ì¥",
              "    pm.collectionVariables.set('access_token', response.accessToken);",
              "    console.log('âœ… ë¡œê·¸ì¸ ì™„ë£Œ, í† í° ì €ì¥ë¨');",
              "});",
              "",
              "// ë‹¤ìŒ ìš”ì²­ì„ ìœ„í•´ sequence ì¦ê°€",
              "let currentSeq = parseInt(pm.collectionVariables.get('sequence'));",
              "pm.collectionVariables.set('sequence', (currentSeq + 1).toString());"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Accept",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"accessToken\": \"\",\n  \"sequence\": {{sequence}},\n  \"platform_type\": \"native\",\n  \"account_id\": \"{{test_user_id}}\",\n  \"password\": \"Test1234!\"\n}"
        },
        "url": {
          "raw": "{{base_url}}/api/account/login",
          "host": ["{{base_url}}"],
          "path": ["api", "account", "login"]
        },
        "description": "ì‚¬ìš©ì ë¡œê·¸ì¸í•˜ì—¬ accessTokenì„ íšë“í•©ë‹ˆë‹¤."
      }
    },
    {
      "name": "ğŸ’¬ Step 3: ì±—ë´‡ ì„¸ì…˜ ìƒì„±",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('ì±—ë´‡ ì„¸ì…˜ ìƒì„± ì„±ê³µ', function () {",
              "    const response = pm.response.json();",
              "    pm.expect(response.errorCode).to.eql(0);",
              "    pm.expect(response.room).to.exist;",
              "    pm.expect(response.room.room_id).to.exist;",
              "    ",
              "    // room_id ì €ì¥",
              "    pm.collectionVariables.set('room_id', response.room.room_id);",
              "    console.log('âœ… ì±—ë´‡ ì„¸ì…˜ ìƒì„±:', response.room.room_id);",
              "    console.log('  - ì œëª©:', response.room.title);",
              "    console.log('  - AI í˜ë¥´ì†Œë‚˜:', response.room.ai_persona);",
              "});",
              "",
              "// ë‹¤ìŒ ìš”ì²­ì„ ìœ„í•´ sequence ì¦ê°€",
              "let currentSeq = parseInt(pm.collectionVariables.get('sequence'));",
              "pm.collectionVariables.set('sequence', (currentSeq + 1).toString());"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Accept",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"accessToken\": \"{{access_token}}\",\n  \"sequence\": {{sequence}},\n  \"ai_persona\": \"GPT4O\",\n  \"title\": \"ì£¼ì‹ íˆ¬ì ìƒë‹´\"\n}"
        },
        "url": {
          "raw": "{{base_url}}/api/chat/room/create",
          "host": ["{{base_url}}"],
          "path": ["api", "chat", "room", "create"]
        },
        "description": "ìƒˆë¡œìš´ AI ì±—ë´‡ ì„¸ì…˜ì„ ìƒì„±í•©ë‹ˆë‹¤."
      }
    },
    {
      "name": "ğŸ“¤ Step 4: ì²« ë²ˆì§¸ ë©”ì‹œì§€ ì „ì†¡",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('ì²« ë²ˆì§¸ ë©”ì‹œì§€ ì „ì†¡ ì„±ê³µ', function () {",
              "    const response = pm.response.json();",
              "    pm.expect(response.errorCode).to.eql(0);",
              "    pm.expect(response.message).to.exist;",
              "    pm.expect(response.message.sender_type).to.eql('AI');",
              "    ",
              "    console.log('âœ… AI ì‘ë‹µ ë°›ìŒ:');",
              "    console.log('  - ë©”ì‹œì§€ ID:', response.message.message_id);",
              "    console.log('  - ë‚´ìš© ê¸¸ì´:', response.message.content.length, 'ì');",
              "    console.log('  - ì‘ë‹µ ì‹œê°„:', response.message.timestamp);",
              "});",
              "",
              "// ë‹¤ìŒ ìš”ì²­ì„ ìœ„í•´ sequence ì¦ê°€",
              "let currentSeq = parseInt(pm.collectionVariables.get('sequence'));",
              "pm.collectionVariables.set('sequence', (currentSeq + 1).toString());"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Accept",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"accessToken\": \"{{access_token}}\",\n  \"sequence\": {{sequence}},\n  \"room_id\": \"{{room_id}}\",\n  \"content\": \"ì•ˆë…•í•˜ì„¸ìš”! ì‚¼ì„±ì „ì ì£¼ì‹ì— ëŒ€í•´ ë¶„ì„í•´ì£¼ì‹¤ ìˆ˜ ìˆë‚˜ìš”?\",\n  \"persona\": \"GPT4O\"\n}"
        },
        "url": {
          "raw": "{{base_url}}/api/chat/message/send",
          "host": ["{{base_url}}"],
          "path": ["api", "chat", "message", "send"]
        },
        "description": "AI ì±—ë´‡ì—ê²Œ ì²« ë²ˆì§¸ ì§ˆë¬¸ì„ ì „ì†¡í•©ë‹ˆë‹¤."
      }
    },
    {
      "name": "ğŸ“¤ Step 5: ë‘ ë²ˆì§¸ ë©”ì‹œì§€ ì „ì†¡",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('ë‘ ë²ˆì§¸ ë©”ì‹œì§€ ì „ì†¡ ì„±ê³µ', function () {",
              "    const response = pm.response.json();",
              "    pm.expect(response.errorCode).to.eql(0);",
              "    pm.expect(response.message).to.exist;",
              "    pm.expect(response.message.sender_type).to.eql('AI');",
              "    ",
              "    console.log('âœ… AI ë‘ ë²ˆì§¸ ì‘ë‹µ ë°›ìŒ:');",
              "    console.log('  - ë©”ì‹œì§€ ID:', response.message.message_id);",
              "    console.log('  - ë‚´ìš© ë¯¸ë¦¬ë³´ê¸°:', response.message.content.substring(0, 100) + '...');",
              "});",
              "",
              "// ë‹¤ìŒ ìš”ì²­ì„ ìœ„í•´ sequence ì¦ê°€",
              "let currentSeq = parseInt(pm.collectionVariables.get('sequence'));",
              "pm.collectionVariables.set('sequence', (currentSeq + 1).toString());"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Accept",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"accessToken\": \"{{access_token}}\",\n  \"sequence\": {{sequence}},\n  \"room_id\": \"{{room_id}}\",\n  \"content\": \"í˜„ì¬ ë§¤ìˆ˜ ì‹œì ì´ ì ì ˆí•œê°€ìš”? ëª©í‘œê°€ëŠ” ì–´ëŠ ì •ë„ë¡œ ë³´ì‹œë‚˜ìš”?\",\n  \"persona\": \"GPT4O\"\n}"
        },
        "url": {
          "raw": "{{base_url}}/api/chat/message/send",
          "host": ["{{base_url}}"],
          "path": ["api", "chat", "message", "send"]
        },
        "description": "AI ì±—ë´‡ì—ê²Œ ì¶”ê°€ ì§ˆë¬¸ì„ ì „ì†¡í•©ë‹ˆë‹¤."
      }
    },
    {
      "name": "ğŸ“‹ Step 6: ë©”ì‹œì§€ ëª©ë¡ ì¡°íšŒ",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('ë©”ì‹œì§€ ëª©ë¡ ì¡°íšŒ ì„±ê³µ', function () {",
              "    const response = pm.response.json();",
              "    pm.expect(response.errorCode).to.eql(0);",
              "    pm.expect(response.messages).to.be.an('array');",
              "    ",
              "    console.log('âœ… ë©”ì‹œì§€ ëª©ë¡ ì¡°íšŒ ì™„ë£Œ:');",
              "    console.log('  - ì´ ë©”ì‹œì§€ ìˆ˜:', response.messages.length);",
              "    ",
              "    response.messages.forEach((msg, index) => {",
              "        console.log(`  ${index + 1}. [${msg.sender_type}] ${msg.content.substring(0, 50)}...`);",
              "    });",
              "});",
              "",
              "// ë‹¤ìŒ ìš”ì²­ì„ ìœ„í•´ sequence ì¦ê°€",
              "let currentSeq = parseInt(pm.collectionVariables.get('sequence'));",
              "pm.collectionVariables.set('sequence', (currentSeq + 1).toString());"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Accept",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"accessToken\": \"{{access_token}}\",\n  \"sequence\": {{sequence}},\n  \"room_id\": \"{{room_id}}\",\n  \"page\": 1,\n  \"limit\": 50,\n  \"before_timestamp\": \"\"\n}"
        },
        "url": {
          "raw": "{{base_url}}/api/chat/messages",
          "host": ["{{base_url}}"],
          "path": ["api", "chat", "messages"]
        },
        "description": "ì±—ë´‡ ì„¸ì…˜ì˜ ëª¨ë“  ë©”ì‹œì§€ ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤."
      }
    },
    {
      "name": "ğŸ“ Step 7: ì„¸ì…˜ ëª©ë¡ ì¡°íšŒ",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('ì„¸ì…˜ ëª©ë¡ ì¡°íšŒ ì„±ê³µ', function () {",
              "    const response = pm.response.json();",
              "    pm.expect(response.errorCode).to.eql(0);",
              "    pm.expect(response.rooms).to.be.an('array');",
              "    pm.expect(response.total_count).to.be.greaterThan(0);",
              "    ",
              "    console.log('âœ… ì±—ë´‡ ì„¸ì…˜ ëª©ë¡ ì¡°íšŒ ì™„ë£Œ:');",
              "    console.log('  - ì´ ì„¸ì…˜ ìˆ˜:', response.total_count);",
              "    ",
              "    response.rooms.forEach((room, index) => {",
              "        console.log(`  ${index + 1}. [${room.ai_persona}] ${room.title} (ë©”ì‹œì§€: ${room.message_count}ê°œ)`);",
              "    });",
              "});",
              "",
              "// ë‹¤ìŒ ìš”ì²­ì„ ìœ„í•´ sequence ì¦ê°€",
              "let currentSeq = parseInt(pm.collectionVariables.get('sequence'));",
              "pm.collectionVariables.set('sequence', (currentSeq + 1).toString());"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Accept",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"accessToken\": \"{{access_token}}\",\n  \"sequence\": {{sequence}},\n  \"page\": 1,\n  \"limit\": 20\n}"
        },
        "url": {
          "raw": "{{base_url}}/api/chat/rooms",
          "host": ["{{base_url}}"],
          "path": ["api", "chat", "rooms"]
        },
        "description": "ì‚¬ìš©ìì˜ ëª¨ë“  ì±—ë´‡ ì„¸ì…˜ ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤."
      }
    },
    {
      "name": "ğŸ’¬ Step 8: ì¶”ê°€ ì„¸ì…˜ ìƒì„± (ì•”í˜¸í™”í)",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('ë‘ ë²ˆì§¸ ì„¸ì…˜ ìƒì„± ì„±ê³µ', function () {",
              "    const response = pm.response.json();",
              "    pm.expect(response.errorCode).to.eql(0);",
              "    pm.expect(response.room).to.exist;",
              "    ",
              "    console.log('âœ… ë‘ ë²ˆì§¸ ì±—ë´‡ ì„¸ì…˜ ìƒì„±:', response.room.room_id);",
              "    console.log('  - ì œëª©:', response.room.title);",
              "});",
              "",
              "// ë‹¤ìŒ ìš”ì²­ì„ ìœ„í•´ sequence ì¦ê°€",
              "let currentSeq = parseInt(pm.collectionVariables.get('sequence'));",
              "pm.collectionVariables.set('sequence', (currentSeq + 1).toString());"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Accept",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"accessToken\": \"{{access_token}}\",\n  \"sequence\": {{sequence}},\n  \"ai_persona\": \"GPT4O\",\n  \"title\": \"ì•”í˜¸í™”í íˆ¬ì ê°€ì´ë“œ\"\n}"
        },
        "url": {
          "raw": "{{base_url}}/api/chat/room/create",
          "host": ["{{base_url}}"],
          "path": ["api", "chat", "room", "create"]
        },
        "description": "ë‹¤ë¥¸ ì£¼ì œì˜ ì±—ë´‡ ì„¸ì…˜ì„ ì¶”ê°€ë¡œ ìƒì„±í•©ë‹ˆë‹¤."
      }
    },
    {
      "name": "ğŸ—‘ï¸ Step 9: ì²« ë²ˆì§¸ ì„¸ì…˜ ì‚­ì œ",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('ì„¸ì…˜ ì‚­ì œ ì„±ê³µ', function () {",
              "    const response = pm.response.json();",
              "    pm.expect(response.errorCode).to.eql(0);",
              "    ",
              "    console.log('âœ… ì±—ë´‡ ì„¸ì…˜ ì‚­ì œ ì™„ë£Œ');",
              "    console.log('  - ì‚­ì œëœ ì„¸ì…˜ ID:', pm.collectionVariables.get('room_id'));",
              "});",
              "",
              "// ë‹¤ìŒ ìš”ì²­ì„ ìœ„í•´ sequence ì¦ê°€",
              "let currentSeq = parseInt(pm.collectionVariables.get('sequence'));",
              "pm.collectionVariables.set('sequence', (currentSeq + 1).toString());"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Accept",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"accessToken\": \"{{access_token}}\",\n  \"sequence\": {{sequence}},\n  \"room_id\": \"{{room_id}}\"\n}"
        },
        "url": {
          "raw": "{{base_url}}/api/chat/room/delete",
          "host": ["{{base_url}}"],
          "path": ["api", "chat", "room", "delete"]
        },
        "description": "í…ŒìŠ¤íŠ¸ê°€ ì™„ë£Œëœ ì±—ë´‡ ì„¸ì…˜ì„ ì‚­ì œí•©ë‹ˆë‹¤."
      }
    },
    {
      "name": "ğŸšª Step 10: ë¡œê·¸ì•„ì›ƒ",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('ë¡œê·¸ì•„ì›ƒ ì„±ê³µ', function () {",
              "    const response = pm.response.json();",
              "    pm.expect(response.errorCode).to.eql(0);",
              "    ",
              "    console.log('âœ… ë¡œê·¸ì•„ì›ƒ ì™„ë£Œ');",
              "});",
              "",
              "// í…ŒìŠ¤íŠ¸ ì™„ë£Œ í›„ ë³€ìˆ˜ ì •ë¦¬",
              "pm.collectionVariables.set('access_token', '');",
              "pm.collectionVariables.set('room_id', '');",
              "pm.collectionVariables.set('sequence', '1');",
              "",
              "console.log('ğŸ‰ ì±„íŒ… ì‹œìŠ¤í…œ ì „ì²´ í…ŒìŠ¤íŠ¸ ì™„ë£Œ!');"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Accept",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"accessToken\": \"{{access_token}}\",\n  \"sequence\": {{sequence}}\n}"
        },
        "url": {
          "raw": "{{base_url}}/api/account/logout",
          "host": ["{{base_url}}"],
          "path": ["api", "account", "logout"]
        },
        "description": "ì‚¬ìš©ì ì„¸ì…˜ì„ ì¢…ë£Œí•˜ê³  ë¡œê·¸ì•„ì›ƒí•©ë‹ˆë‹¤."
      }
    }
  ]
}